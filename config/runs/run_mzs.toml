# Run configuration for MZS (Mario Zucchelli Station)
# All paths are relative to the project root.

# Inherit site defaults (name, lat/lon/alt, models/output templates if any)
include_site = "config/sites/mzs.toml"

[algo]
# Algorithm module to use: "gauss2d" (robust timing + encoder cleaning)
# or "peak1d" (legacy 1D approach).
name = "peak1d"

# Optional knobs used by the robust gauss2d implementation
[algo.gauss2d]
# Maximum acceptable slew rate for encoder cleaning (deg/s).
# Tune according to your scanning speed; 3.0 is conservative.
max_az_rate_dps = 3.0
max_el_rate_dps = 3.0

[ephemeris]
# Refraction model for the Sun position: "none" to match legacy,
# or "apparent" if you want standard refracted altitude.
refraction = "none"

[calibration]
# Instrumental biases
az_bias_deg = 0.75
el_bias_deg = 0.0

[processing]
# Reserved for future options (e.g., per-row vs per-map aggregation)
time_mode = "median-subscan"

[output]
# Use templated naming; DO NOT set out_tsv here, to let the CLI build:
#   output/offsets/offsets_{site}_{algo}_{stamp}.tsv
out_dir = "output/offsets"
filename_template = "offsets_{site}_{algo}_{stamp}.tsv"
write_time_uncertainty = false
verbose = true

[input]
# Root folder where raw map files and environment.tsv are located.
data_dir = "./orange/data"
# Glob pattern (relative to data_dir) to discover map files.
map_glob = "**/*.*"
# File name of the per-sample environment file inside data_dir.
environment_file = "environment.tsv"
